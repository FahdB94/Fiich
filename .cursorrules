# ğŸš€ Configuration Cursor pour l'Application Fiich

## ğŸ¯ Objectif
Cette application est une plateforme de gestion d'entreprises avec partage de documents, construite avec Next.js, TypeScript et Supabase.

## ğŸ—ï¸ Architecture
- **Frontend**: Next.js 15 avec App Router
- **Styling**: Tailwind CSS + shadcn/ui
- **Backend**: Supabase (PostgreSQL + Auth + Storage)
- **Types**: TypeScript strict
- **Tests**: Jest

## ğŸ”§ Configuration MCP
L'application utilise un serveur MCP personnalisÃ© pour Supabase qui permet d'exÃ©cuter des requÃªtes SQL directement.

### Serveur MCP Supabase
```json
{
  "mcpServers": {
    "supabase": {
      "command": "node",
      "args": ["mcp/supabase-mcp.js"],
      "env": {
        "NEXT_PUBLIC_SUPABASE_URL": "https://eiawccnqfmvdnvjlyftx.supabase.co",
        "SUPABASE_SERVICE_ROLE_KEY": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImVpYXdjY25xZm12ZG52amx5ZnR4Iiwicm9sZSI6InNlcnZpY2Vfcm9sZSIsImlhdCI6MTc1NDE2NzcyMSwiZXhwIjoyMDY5NzQzNzIxfQ.kuO58UgPjliHAbjgv2OKG0AbLmWpx3wZCcptke6B7Ik"
      }
    }
  }
}
```

## ğŸ—„ï¸ Outils MCP Disponibles

### 1. `cleanup_database`
Nettoie complÃ¨tement la base de donnÃ©es (SUPPRIME TOUT)
- **Confirmation**: Tapez "CONFIRM" pour confirmer

### 2. `create_clean_schema`
CrÃ©e le nouveau schÃ©ma propre de la base de donnÃ©es
- **Confirmation**: Tapez "CONFIRM" pour confirmer

### 3. `activate_rls`
Active la sÃ©curitÃ© RLS sur toutes les tables
- **Confirmation**: Tapez "CONFIRM" pour confirmer

### 4. `list_tables`
Liste toutes les tables de la base de donnÃ©es
- **ParamÃ¨tres**: `schema` (optionnel, dÃ©faut: "public")

### 5. `describe_table`
DÃ©crit la structure d'une table spÃ©cifique
- **ParamÃ¨tres**: `table_name` (requis), `schema` (optionnel)

### 6. `check_rls_policies`
VÃ©rifie les politiques RLS sur une table
- **ParamÃ¨tres**: `table_name` (requis)

## ğŸ“‹ Conventions de Code

### Structure des Dossiers
```
src/
â”œâ”€â”€ app/           # Pages Next.js (App Router)
â”œâ”€â”€ components/    # Composants React rÃ©utilisables
â”œâ”€â”€ hooks/         # Hooks React personnalisÃ©s
â”œâ”€â”€ lib/           # Utilitaires et configuration
â”œâ”€â”€ types/         # Types TypeScript
â””â”€â”€ utils/         # Fonctions utilitaires
```

### Naming Conventions
- **Composants**: PascalCase (ex: `CompanyCard`)
- **Hooks**: camelCase avec prÃ©fixe `use` (ex: `useAuth`)
- **Types**: PascalCase (ex: `UserProfile`)
- **Fonctions**: camelCase (ex: `formatDate`)
- **Constantes**: UPPER_SNAKE_CASE (ex: `MAX_FILE_SIZE`)

### Imports
- **Composants**: `@/components/...`
- **Hooks**: `@/hooks/...`
- **Types**: `@/types/...`
- **Utilitaires**: `@/lib/...`

## ğŸ”’ SÃ©curitÃ©

### RLS (Row Level Security)
- Toutes les tables ont RLS activÃ©
- Politiques basÃ©es sur les rÃ´les utilisateur
- Permissions granulaires selon les besoins

### Authentification
- Supabase Auth pour la gestion des utilisateurs
- Sessions sÃ©curisÃ©es avec cookies httpOnly
- Middleware pour la protection des routes

## ğŸ§ª Tests

### Structure des Tests
```
tests/
â”œâ”€â”€ unit/          # Tests unitaires
â”œâ”€â”€ integration/   # Tests d'intÃ©gration
â””â”€â”€ e2e/          # Tests end-to-end
```

### Commandes
- `npm test` - ExÃ©cuter tous les tests
- `npm run test:watch` - Tests en mode watch
- `npm run test:coverage` - Tests avec couverture

## ğŸš€ DÃ©veloppement

### Commandes Principales
- `npm run dev` - Serveur de dÃ©veloppement
- `npm run build` - Build de production
- `npm run lint` - VÃ©rification du code
- `npm run type-check` - VÃ©rification des types

### Variables d'Environnement
```bash
# Copier le fichier d'exemple
cp .env.example .env.local

# Configurer les variables
NEXT_PUBLIC_SUPABASE_URL=...
SUPABASE_SERVICE_ROLE_KEY=...
```

## ğŸ“š Documentation

### Fichiers Importants
- `README.md` - Documentation principale
- `README_CLEANUP.md` - Guide de nettoyage
- `scripts/` - Scripts de base de donnÃ©es et nettoyage

### Base de DonnÃ©es
- SchÃ©ma normalisÃ© et sÃ©curisÃ©
- Politiques RLS appropriÃ©es
- Index pour les performances
- Triggers pour la maintenance

## ğŸ¨ UI/UX

### Design System
- **Couleurs**: Palette cohÃ©rente avec Tailwind
- **Typographie**: HiÃ©rarchie claire des textes
- **Espacement**: SystÃ¨me de spacing cohÃ©rent
- **Composants**: shadcn/ui pour la cohÃ©rence

### Responsive Design
- Mobile-first approach
- Breakpoints Tailwind standard
- Navigation adaptative

## ğŸ” DÃ©bogage

### Outils de DÃ©veloppement
- React DevTools
- Supabase Dashboard
- Console navigateur
- Logs serveur

### Erreurs Communes
- VÃ©rifier la connexion Supabase
- ContrÃ´ler les variables d'environnement
- VÃ©rifier les permissions RLS
- ContrÃ´ler les types TypeScript

---

**ğŸ’¡ Conseil**: Utilisez le serveur MCP Supabase pour interagir directement avec la base de donnÃ©es et faciliter le dÃ©veloppement !
